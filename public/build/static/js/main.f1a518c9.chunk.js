(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{108:function(e,t,c){},109:function(e,t,c){},110:function(e,t,c){},111:function(e,t,c){},112:function(e,t,c){},125:function(e,t,c){},126:function(e,t,c){},127:function(e,t,c){},128:function(e,t,c){},129:function(e,t,c){},130:function(e,t,c){},131:function(e,t,c){},132:function(e,t,c){},133:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c(2),n=c.n(s),r=c(22),i=c.n(r),l=(c(61),c(62),c(3)),j=c(8),o=(c(63),c(5)),u=c.n(o),d=c(7),b=c(6),O=c.n(b),p="/",h=Object(s.createContext)([]),m=Object(s.createContext)(!1),f=Object(s.createContext)(!0),x=Object(s.createContext)([]);O.a.interceptors.request.use((function(e){var t=sessionStorage.getItem("accessToken");return e.headers.authorization="Bearer ".concat(t),e}),(function(e){return Promise.reject(e)}));var v=function(e){var t=e.children,c=Object(s.useState)(!1),n=Object(l.a)(c,2),r=n[0],i=n[1],j=Object(s.useState)({}),o=Object(l.a)(j,2),b=o[0],p=o[1],v=Object(s.useState)(!1),g=Object(l.a)(v,2),y=g[0],N=g[1],w=Object(s.useState)(!0),k=Object(l.a)(w,2),S=k[0],C=k[1];return Object(s.useEffect)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!0,e.prev=1,e.next=4,O.a.get("/users/signin/");case 4:c=e.sent,t=!1,p(c.data),N(!t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),N(!1),p({});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}})()(),C(!1)}),[S]),Object(a.jsx)(h.Provider,{value:[b,p],children:Object(a.jsx)(m.Provider,{value:y,children:Object(a.jsx)(f.Provider,{value:[S,C],children:Object(a.jsx)(x.Provider,{value:[r,i],children:t})})})})},g=c(10),y=c(4),N=(c(82),c(27)),w=(c(83),function(e){var t=e.privateHandler,c=e.inputsBox,s=Object(l.a)(c,1)[0];return Object(a.jsx)("div",{className:"cb-all",children:Object(a.jsxs)("div",{className:"cb-slide",children:[Object(a.jsx)("h2",{children:s.private&&"oui"}),Object(a.jsx)("div",{className:"cb-rond ".concat(s.private?"private-true":"private-false"),id:"private",onClick:t}),Object(a.jsx)("h2",{children:!s.private&&"non"})]})})}),k=(c(42),c(26)),S=c.n(k),C=function(e){var t=e.children,c=e.sizeAll,s=e.loadingValue;return Object(a.jsx)("div",{children:s?Object(a.jsx)(S.a,{type:"ThreeDots",color:"#77aca2",height:c,width:c,timeout:0}):t})},E=function(){var e=Object(s.useState)({title:"",desc:"",private:!1}),t=Object(l.a)(e,2),c=t[0],n=t[1],r=Object(s.useState)([]),i=Object(l.a)(r,2),j=i[0],o=i[1],b=Object(s.useState)(""),p=Object(l.a)(b,2),m=p[0],f=p[1],v=Object(s.useState)(!1),k=Object(l.a)(v,2),S=k[0],E=k[1],z=Object(s.useContext)(h),I=Object(l.a)(z,1)[0],_=Object(s.useContext)(x),R=Object(l.a)(_,2),M=R[0],P=R[1],D=function(e){f(""),"private"===e.target.id?n(Object(y.a)(Object(y.a)({},c),{},Object(g.a)({},e.target.id,!c[e.target.id]))):n(Object(y.a)(Object(y.a)({},c),{},Object(g.a)({},e.target.id,e.target.value)))},T=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,s,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in t.preventDefault(),E(!0),a=!1,c)c[s]||"private"===s||(a=!0,f("Merci de remplir ce champ : ".concat(s)));if(!a){e.next=6;break}return e.abrupt("return");case 6:return(r=new FormData).append("title",c.title),r.append("desc",c.desc),r.append("creation",(new Date).toISOString().slice(0,19).replace("T"," ")),r.append("private",c.private),r.append("user_id",I.id),Object.values(j).forEach((function(e){r.append("image",e)})),e.prev=13,e.next=16,O.a.post("/pics/pic",r);case 16:n({title:"",desc:""}),E(!1),f("Photo post\xe9e"),P(!M),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(13),e.t0.response&&f(e.t0.response.data);case 25:case"end":return e.stop()}}),e,null,[[13,22]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"addpics-all",children:Object(a.jsxs)("form",{encType:"multipart/form-data",method:"post",onSubmit:T,children:[Object(a.jsx)("h2",{children:"Titre des photos"}),Object(a.jsx)("input",{id:"title",type:"text",value:c.title,onChange:D,placeholder:"Ins\xe9rer le titre des ou de la photo"}),Object(a.jsx)("h2",{children:"Description"}),Object(a.jsx)("textarea",{id:"desc",type:"text",value:c.desc,onChange:D}),Object(a.jsx)("label",{htmlFor:"add-photo",children:j.length>0?"".concat(j.length," ").concat(j.length>1?"fichiers selectionn\xe9s":"fichier selectionner "):"S\xe9lectionner un ou plusieurs souvenirs"}),Object(a.jsx)("input",{id:"add-photo",type:"file",onChange:function(e){o(e.target.files)},accept:"image/jpg , image/jpeg , image/png",multiple:!0}),Object(a.jsxs)("div",{className:"addpics-check",children:[Object(a.jsx)("h2",{children:"Priv\xe9e "}),Object(a.jsx)(w,{privateHandler:D,inputsBox:[c,n]})]}),Object(a.jsxs)("button",{type:"submit",children:[!S&&Object(a.jsx)("p",{children:"Poster"}),Object(a.jsx)(C,{sizeAll:20,loadingValue:S,children:Object(a.jsx)(N.a,{size:18})})]}),Object(a.jsx)("p",{className:"error",children:m})]})})},z=function(e,t){var c=Object(s.useState)(!1),a=Object(l.a)(c,2),n=a[0],r=a[1];return Object(s.useEffect)((function(){function c(c){e&&t?e.contains(c.target)||t.contains(c.target)||r(!0):e&&!e.contains(c.target)&&r(!0)}return document.addEventListener("mousedown",c),function(){document.removeEventListener("mousedown",c)}}),[e,t]),n},I=c(11),_=function(e){var t=e.userStat,c=e.isDisplayed,n=e.mainBtn,r=e.transRef,i=Object(s.useContext)(f),o=Object(l.a)(i,2),u=o[0],d=o[1],b=Object(l.a)(t,2),O=b[0],p=b[1],h=Object(l.a)(c,2),m=h[0],x=h[1],v=Object(s.useState)(!1),g=Object(l.a)(v,2),y=g[0],N=g[1],w=z(r.current,n);return Object(s.useEffect)((function(){w&&x(!1)}),[w,m,x]),Object(a.jsxs)("div",{className:"side-m",ref:r,children:[Object(a.jsx)("div",{className:"arrow-up"}),Object(a.jsxs)("div",{className:"side-menu",children:[Object(a.jsx)("h2",{className:"side-menu-title",children:"Ajouter une photo"}),Object(a.jsxs)("ul",{children:[Object(a.jsx)(E,{}),Object(a.jsx)(j.b,{to:"/users/".concat(O.id),children:Object(a.jsx)("li",{onClick:function(){x(!1)},children:"Mon profile"})}),O.family_id&&Object(a.jsx)(j.b,{to:"/family/".concat(O.family_id),children:Object(a.jsx)("li",{onClick:function(){x(!1)},children:"Ma famille"})}),Object(a.jsx)("li",{id:"logOut",onClick:function(){sessionStorage.clear(),p({}),N(!0),x(!1),d(!u)},children:"Se d\xe9connecter"})]})]}),Object(a.jsx)("div",{className:"arrow-down"}),y&&Object(a.jsx)(I.a,{to:"/",exact:!0})]})},R=c(135),M=c(24),P=c(19),D=c(48),T=c(21),q={isMinSize:function(e,t){return e.length>=t},isSame:function(e,t){return e===t},emailIsValid:function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}},F=c(18),A=(c(108),c(109),function(e){var t=e.setDisplaySignIn,c=Object(s.useState)({checklogin:"",checkpassword:""}),n=Object(l.a)(c,2),r=n[0],i=n[1],j=Object(s.useState)(""),o=Object(l.a)(j,2),b=o[0],p=o[1],h=Object(s.useState)(!1),m=Object(l.a)(h,2),f=m[0],x=m[1],v=Object(s.useState)({}),N=Object(l.a)(v,2),w=N[0],k=N[1],S=function(e){i(Object(y.a)(Object(y.a)({},r),{},Object(g.a)({},e.target.id,e.target.value))),p("")},C=function(){var e=Object(d.a)(u.a.mark((function e(t){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!q.emailIsValid(r.checklogin)){e.next=16;break}return e.prev=2,e.next=5,O.a.post("/users/changepwd/",{login:r.checklogin});case 5:c=e.sent,x(!0),k(c.data),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),x(!1),p(e.t0.response.data);case 14:e.next=17;break;case 16:p("Merci d'entrer un email valide");case 17:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(u.a.mark((function e(c){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),!q.isMinSize(r.checkpassword,8)){e.next=15;break}return e.prev=2,e.next=5,O.a.put("/users/changepwd/"+w.id,{id:w.id,password:r.checkpassword});case 5:a=e.sent,p(a.data),t(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),e.t0.response&&p(e.t0.response.data);case 13:e.next=16;break;case 15:p("Merci d'entrer un mot de passe  valide");case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"getpassword-all",children:[Object(a.jsx)("h3",{children:"Reinitialiser votre mot de pass"}),Object(a.jsxs)("div",{className:"getpassword-container",children:[Object(a.jsxs)("div",{className:"getpassword-checkemail",children:[Object(a.jsx)("h3",{children:"Email"}),Object(a.jsx)("input",{id:"checklogin",type:"text",placeholder:"Entrez votre adresse mail",value:r.checklogin,onChange:S}),Object(a.jsx)("button",{onClick:C,children:"Envoyer"})]}),f&&Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"getpassword-checkemail",children:[Object(a.jsx)("h3",{children:"Passe"}),Object(a.jsx)("input",{id:"checkpassword",type:"password",value:r.checkpassword,placeholder:"Nouveau mot de passe",onChange:S}),Object(a.jsx)("button",{onClick:E,children:"Envoyer"})]})}),Object(a.jsx)("p",{children:b})]})]})}),L=function(e){var t=e.signInBtnRef,c=e.signinPopDisplay,n=e.transRef,r=Object(s.useState)({}),i=Object(l.a)(r,2),j=i[0],o=i[1],b=Object(s.useState)(!1),p=Object(l.a)(b,2),m=p[0],x=p[1],v=Object(s.useState)({login:"",password:""}),N=Object(l.a)(v,2),w=N[0],k=N[1],S=Object(s.useState)(!1),E=Object(l.a)(S,2),_=E[0],R=E[1],M=c[1],D=Object(s.useState)(!1),T=Object(l.a)(D,2),L=T[0],V=T[1],B=Object(s.useState)(!1),U=Object(l.a)(B,2),H=U[0],Y=U[1],J=Object(s.useState)(100),W=Object(l.a)(J,2),Q=W[0],$=W[1],G=Object(s.useContext)(h)[1],K=Object(s.useContext)(f)[1],X=Object(s.useRef)(),Z=z(X.current,t);Object(s.useEffect)((function(){Z&&M(!1)}),[Z,M]),Object(s.useEffect)((function(){window.innerWidth<500&&$(L?-420:-250)}),[L]);var ee=function(e){o({}),k(Object(y.a)(Object(y.a)({},w),{},Object(g.a)({},e.target.id,e.target.value)))},te=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(!0),e.prev=1,e.next=4,O.a.post("/users/signin/",w);case 4:t=e.sent,sessionStorage.setItem("accessToken",t.data.accessToken),G(Object(y.a)({},t.data.user)),K(!0),R(!0),M(!1),Y(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),e.t0.response&&o(Object(y.a)(Object(y.a)({},j),{},{sign:e.t0.response.data}));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"signin-all",ref:n,style:{top:Q+"px"},children:Object(a.jsxs)("div",{className:"signin-wrapp",ref:X,children:[Object(a.jsx)("h2",{children:"S'identifier"}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={};for(var c in w)"login"===c&&(q.emailIsValid(w[c])||(t=Object(y.a)(Object(y.a)({},t),{},Object(g.a)({},c,"E mail valide")))),"password"===c&&(q.isMinSize(w[c],8)||(t=Object(y.a)(Object(y.a)({},t),{},Object(g.a)({},c,"Minimum 8 caracteres"))));0===Object.keys(t).length?te():o(t)},children:[Object(a.jsxs)("div",{className:"signin-inputs-error",children:[Object(a.jsxs)("div",{className:"signin-inputs",children:[Object(a.jsx)("h3",{children:"E mail"}),Object(a.jsx)("input",{id:"login",type:"text",value:w.login,onChange:ee})]}),Object(a.jsx)("p",{children:j.login})]}),Object(a.jsxs)("div",{className:"signin-inputs-error",children:[Object(a.jsxs)("div",{className:"signin-inputs",children:[Object(a.jsx)("h3",{children:"Mot de passe"}),Object(a.jsx)("input",{id:"password",type:m?"text":"password",value:w.password,onChange:ee}),Object(a.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),x(!m)},children:m?Object(a.jsx)(F.b,{size:18}):Object(a.jsx)(F.a,{size:18})})]}),Object(a.jsx)("p",{children:j.password}),Object(a.jsx)("p",{children:j.sign})]}),Object(a.jsx)("button",{type:"submit",children:Object(a.jsx)(C,{sizeAll:20,loadingValue:H,children:Object(a.jsx)(P.a,{size:18})})}),Object(a.jsx)("p",{onClick:function(){return V(!L)},style:{cursor:"pointer"},children:"Mot de passe oubli\xe9 ?"}),_&&Object(a.jsx)(I.a,{to:"/"})]}),L&&Object(a.jsx)(A,{setDisplaySignIn:M})]})})},V=function(){var e=Object(s.useContext)(h),t=Object(l.a)(e,2),c=t[0],n=t[1],r=Object(s.useState)(!1),i=Object(l.a)(r,2),o=i[0],u=i[1],d=Object(s.useState)(!1),b=Object(l.a)(d,2),O=b[0],p=b[1],m=Object(s.useRef)(),f=Object(s.useRef)(),x=Object(s.useRef)(null);return Object(a.jsx)("nav",{children:Object(a.jsxs)("ul",{children:[Object(a.jsx)("div",{className:"nav-title",children:Object(a.jsx)("h1",{children:"My Family"})}),Object(a.jsx)("div",{className:"nav-user",children:Object(a.jsxs)("div",{className:"nav-user-center",children:[c.id&&Object(a.jsxs)("li",{id:"profile-menu-pic",children:[Object(a.jsx)("div",{className:"menu-profile-pic",style:{backgroundImage:"url('".concat(c.profile,"')")},onClick:function(){u(!o)},ref:m}),c.familyRequest&&c.familyRequest.length>0&&Object(a.jsx)(j.b,{to:"/family/".concat(c.family_id),children:Object(a.jsx)("p",{className:"request-join",children:c.familyRequest.length})})]}),Object(a.jsx)(R.a,{in:o,timeout:200,unmountOnExit:!0,classNames:"my-node",nodeRef:x,children:Object(a.jsx)(_,{userStat:[c,n],isDisplayed:[o,u],mainBtn:m.current,transRef:x})})]})}),Object(a.jsxs)("div",{className:"nav-menu",children:[Object(a.jsx)(j.c,{to:"/",activeClassName:"selected",className:"home-link-reg",children:Object(a.jsxs)("li",{children:[Object(a.jsx)(M.b,{className:"nav-menu-icon"}),Object(a.jsx)("p",{children:"Home"})]})}),Object(a.jsx)(j.c,{to:"/",activeClassName:"selected",className:"home-link-small",children:Object(a.jsxs)("li",{children:[Object(a.jsx)(M.b,{className:"nav-menu-icon"}),Object(a.jsx)("p",{children:"Home"})]})}),Object(a.jsx)(j.c,{to:"/familysearch",activeClassName:"selected",children:Object(a.jsxs)("li",{children:[Object(a.jsx)(P.c,{className:"nav-menu-icon"}),Object(a.jsx)("p",{children:"Familles"})]})}),Object(a.jsx)(j.c,{to:"/search",activeClassName:"selected",children:Object(a.jsxs)("li",{children:[Object(a.jsx)(T.b,{className:"nav-menu-icon"}),Object(a.jsx)("p",{children:"Recherche"})]})}),!c.id&&Object(a.jsxs)("li",{className:"li-id-btn",onClick:function(){p(!O)},ref:f,children:[Object(a.jsx)(D.a,{className:"nav-menu-icon"}),Object(a.jsx)("p",{children:"S'identifier"})]}),Object(a.jsx)(R.a,{in:O,timeout:200,unmountOnExit:!0,classNames:"my-node",nodeRef:x,children:Object(a.jsx)(L,{signInBtnRef:f.current,signinPopDisplay:[O,p],transRef:x})}),!c.id&&Object(a.jsx)("li",{className:"signup-reg",children:Object(a.jsx)(j.c,{to:"/signup",activeClassName:"selected",children:"Inscription"})}),!c.id&&Object(a.jsx)(j.c,{to:"/signup",activeClassName:"selected",children:Object(a.jsxs)("li",{className:"signup-reg-small",children:[Object(a.jsx)(P.b,{className:"nav-menu-icon"}),Object(a.jsx)("p",{children:"Inscription"})]})})]})]})})},B=function(e){var t=e.split("T")[0],c=e.split("T")[1].split(".")[0],a=parseInt(c.split(":")[0])+2;a>=24?(a-=24)<10&&(a="0"+a):a<0&&(a+=24);var s=c.split(":");return s[0]=a,t.split("-").reverse().join("-")+" "+s.join(":")},U=(c(110),function(){document.body.style.position="fixed",document.body.style.left="0",document.body.style.right="0",document.body.style.margin="auto"}),H=function(e,t,c){var a=Object(s.useState)([]),n=Object(l.a)(a,2),r=n[0],i=n[1],j=Object(s.useState)(""),o=Object(l.a)(j,2),b=o[0],h=o[1],m=Object(s.useState)(!1),f=Object(l.a)(m,2),x=f[0],v=f[1];return Object(s.useEffect)((function(){var c=!0;return c&&function(){var a=Object(d.a)(u.a.mark((function a(){var s;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return v(!0),a.prev=1,a.next=4,O.a[e](p+t);case 4:s=a.sent,c&&i(s.data),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),c&&(h(a.t0),i([]));case 11:v(!1);case 12:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(){return a.apply(this,arguments)}}()(),function(){c=!1}}),[t,e,c]),{data:r,error:b,loading:x}},Y=function(e){var t=Object(s.useState)(0),c=Object(l.a)(t,2),a=c[0],n=c[1];return Object(s.useEffect)((function(){if(e.current){var t={root:null,rootMargin:"0px",threshold:J(10)};new IntersectionObserver((function(e){var t=e[0].intersectionRatio;n(t)}),t).observe(e.current)}}),[e]),a},J=function(e){for(var t=[],c=1;c<=e;c++){var a=c/e;t.push(a)}return t.push(0),t},W=function(e){var t=e.path,c=e.id,n=e.userId,r=e.galleryState,i=e.title,j=Object(s.useContext)(h),o=Object(l.a)(j,1)[0],b=Object(s.useContext)(Ee),p=Object(l.a)(b,2),m=p[0],f=p[1],x=Object(s.useState)(!1),v=Object(l.a)(x,2),g=v[0],N=v[1],w=Object(s.useState)(!1),k=Object(l.a)(w,2),S=k[0],E=k[1],z=H("get","comments/pic/"+c),I=Object(s.useRef)(),_=Y(I),R=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,s,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),N(!0),e.prev=2,!r){e.next=10;break}return a=Object(l.a)(r,2),s=a[0],n=a[1],e.next=7,O.a.delete("/pics/delete/"+c);case 7:i=s.filter((function(e){return e.id!==c})),N(!1),n(i);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"gallery-container",ref:I,style:{opacity:"".concat(_)},children:[Object(a.jsx)("div",{className:"gallery-pics",style:{backgroundImage:"url(".concat(t,")")},onClick:function(){f(Object(y.a)(Object(y.a)({},m),{},{auth:!m.auth,picId:c,scrollPos:window.scrollY})),U()},onMouseLeave:function(){return E(!1)},onMouseOver:function(){return E(!0)},children:Object(a.jsxs)("div",{className:S?"gallery-top-info gready":"gallery-top-info",children:[Object(a.jsx)("p",{children:i}),Object(a.jsx)("p",{children:z&&"".concat(z.data.length," ").concat(z.data.length>1?"commentaires":"commentaire")})]})}),o.id===n&&r&&Object(a.jsx)("button",{onClick:R,children:Object(a.jsx)(C,{sizeAll:20,loadingValue:g,children:Object(a.jsx)(M.a,{size:24})})})]})},Q=(c(111),c(112),function(e){document.body.style.position="",document.body.style.left="",document.body.style.right="",document.body.style.margin="",window.scrollTo(0,e)}),$=function(e){var t=e.id,c=e.size,n=Object(s.useContext)(Ee),r=Object(l.a)(n,2),i=r[0],o=r[1],u=H("get","users/"+t);return Object(a.jsx)(j.b,{to:"/users/"+t,draggable:"false",children:Object(a.jsx)("div",{className:"userprofile-icone",style:{backgroundImage:"url(".concat(u.data.profile,")"),width:c+"px",height:c+"px"},onClick:function(){o(Object(y.a)(Object(y.a)({},i),{},{auth:!1})),Q(i.scrollPos)},draggable:"false"})})},G=c(28),K=c.n(G),X=(c(46),{desktop:{breakpoint:{max:3e3,min:1300},items:10,slidesToSlide:3},laptop:{breakpoint:{max:1300,min:1024},items:6,slidesToSlide:2},tablet:{breakpoint:{max:1024,min:464},items:4,slidesToSlide:2},mobile:{breakpoint:{max:464,min:0},items:3,slidesToSlide:1}}),Z=function(e){var t=e.match,c=Object(s.useState)([]),n=Object(l.a)(c,2),r=n[0],i=n[1],o=H("get","users/"+t.params.id),u=H("get","family/"+o.data.family_id),d=H("get","pics/?user_id="+t.params.id);return Object(s.useEffect)((function(){i(d.data)}),[d.data]),Object(a.jsxs)("div",{className:"userpics-container",children:[Object(a.jsx)("div",{className:"intro"}),Object(a.jsx)("div",{className:"userpics-wrapper",children:Object(a.jsxs)("div",{className:"userpics-card-all",children:[Object(a.jsxs)("div",{className:"userpics-info",children:[Object(a.jsx)("div",{className:"userpics-profile",style:{backgroundImage:"url(".concat(o.data.profile," )")}}),Object(a.jsxs)("div",{className:"userpics-info-text",children:[Object(a.jsx)("div",{className:"userpics-info-top",children:Object(a.jsx)("h2",{children:o.data.username})}),o.data.family_id&&Object(a.jsx)(j.b,{to:"/family/".concat(o.data.family_id),children:Object(a.jsxs)("h3",{children:["Famille : ",u.data.name]})}),Object(a.jsxs)("h4",{children:["Inscrit depuis le :",o.data.date_creation&&B(o.data.date_creation)]})]})]}),u.data.familyMembers&&Object(a.jsxs)("div",{className:"userpics-family-title",children:[Object(a.jsx)("h2",{children:"Ma famille"}),Object(a.jsx)("div",{className:"userpics-fam-members",children:Object(a.jsx)(K.a,{responsive:X,swipeable:!0,draggable:!0,showDots:!1,centerMode:!1,containerClass:"carousel-container",itemClass:"carousel-item",children:u.data.familyMembers.map((function(e){return Object(a.jsx)($,{id:e.id,size:50},e.id)}))})})]}),Object(a.jsxs)("div",{className:"userpics-gallery-wrapper",children:[Object(a.jsx)("h3",{children:"Mes souvenirs"}),Object(a.jsx)("div",{className:"userpics-gallery",children:r.map((function(e){return Object(s.createElement)(W,Object(y.a)(Object(y.a)({},e),{},{userId:o.data.id,galleryState:[r,i],key:e.id}))}))})]})]})})]})},ee=c(54),te=function(e){var t=e.component,c=Object(ee.a)(e,["component"]),n=c.path.split("/")[1],r=c.computedMatch.params.id,i=Object(s.useState)(!1),j=Object(l.a)(i,2),o=j[0],b=j[1];return Object(s.useEffect)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get(p+n+"/"+r);case 2:0===e.sent.data.length&&b(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n,r]),Object(a.jsx)(I.b,Object(y.a)(Object(y.a)({},c),{},{render:function(e){return o?Object(a.jsx)(I.a,{to:"/404"}):Object(a.jsx)(t,Object(y.a)({},e))}}))},ce=function(e){var t=e.id,c=e.username;return Object(a.jsxs)("div",{className:"search-card-container",children:[Object(a.jsx)($,{id:t,size:60}),Object(a.jsx)("p",{children:c})]})},ae=(c(125),function(e,t,c){var a=Object(s.useState)([]),n=Object(l.a)(a,2),r=n[0],i=n[1],j=Object(s.useState)(""),o=Object(l.a)(j,2),b=o[0],h=o[1],m=Object(s.useState)(!1),f=Object(l.a)(m,2),x=f[0],v=f[1];return Object(s.useEffect)((function(){var a=!1,s=[];return function(){var n=Object(d.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(v(!0),n.prev=1,!c){n.next=8;break}return n.next=5,O.a[e](p+t.a);case 5:s=n.sent,n.next=11;break;case 8:return n.next=10,O.a[e](p+t.b);case 10:s=n.sent;case 11:a||i(s.data),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(1),h(n.t0),i([]);case 18:v(!1);case 19:case"end":return n.stop()}}),n,null,[[1,14]])})));return function(){return n.apply(this,arguments)}}()(),function(){a=!0}}),[t.a,t.b,e,c]),{data:r,error:b,loading:x}}),se=function(){var e=Object(s.useState)({text:"",select:"Utilisateur"}),t=Object(l.a)(e,2),c=t[0],n=t[1],r=Object(s.useContext)(h),i=Object(l.a)(r,1)[0],j=Object(s.useState)(!0),o=Object(l.a)(j,2),u=o[0],d=o[1],b={a:"users/autocomp/"+c.text,b:"family/pics/search/?id=".concat(i.family_id,"&lettres=").concat(c.text)},O=ae("get",b,u),p=function(e){n(Object(y.a)(Object(y.a)({},c),{},Object(g.a)({},e.target.name,e.target.value)))};return Object(s.useEffect)((function(){"Utilisateur"===c.select?d(!0):d(!1)}),[c]),Object(a.jsxs)("div",{className:"search-all",children:[Object(a.jsx)("div",{className:"intro"}),Object(a.jsxs)("div",{className:"search-wrapper",children:[Object(a.jsx)("div",{className:"search-h2",children:Object(a.jsx)("h2",{children:"Recherche"})}),Object(a.jsxs)("div",{className:"select-inputs",children:[Object(a.jsxs)("select",{name:"select",value:c.select,onChange:p,children:[Object(a.jsx)("option",{value:"Utilisateur",children:"Utilisateur"}),i.family_id&&Object(a.jsx)("option",{value:"Photos",children:"Photos"})]}),Object(a.jsx)("input",{name:"text",type:"text",placeholder:"Utilisateur"===c.select?"Rechercher un utilisateur":"Souvenirs de famille par titre ou #",value:c.user,onChange:p})]})]}),Object(a.jsxs)("div",{className:"search-card-result",children:["Utilisateur"===c.select&&O.data.map((function(e){return Object(s.createElement)(ce,Object(y.a)(Object(y.a)({},e),{},{key:e.id}))})),"Photos"===c.select&&O.data.map((function(e){return Object(a.jsx)(W,{path:e.path,id:e.id,userId:e.user_id,title:e.title},e.id)}))]})]})},ne=(c(126),c(49)),re=function(e){var t=Object(s.useState)(!1),c=Object(l.a)(t,2),n=c[0],r=c[1],i=Object(s.useContext)(h),j=Object(l.a)(i,1)[0],o=Object(l.a)(e.delCom,2),b=o[0],p=o[1],m=H("get","users/"+e.user_id),f=function(){var t=Object(d.a)(u.a.mark((function t(c){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c.preventDefault();try{O.a.delete("/comments/"+e.id),a=b.filter((function(t){return t.id!==e.id})),p(a)}catch(s){console.log(s)}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(s.useEffect)((function(){j.id&&j.id===e.user_id&&r(!0)}),[j,e.user_id]),Object(a.jsxs)("div",{className:"solo-comm-container",children:[Object(a.jsx)($,{id:e.user_id,size:30}),Object(a.jsxs)("div",{className:"solo-comm-info",children:[Object(a.jsx)("h3",{children:m.data.username}),Object(a.jsx)("p",{children:e.contenu})]}),n&&Object(a.jsx)("button",{type:"button",onClick:f,children:Object(a.jsx)(ne.a,{size:18})})]})},ie=c(53),le=function(e){var t=e.picId,c=e.refresh,n=e.comState,r=Object(s.useState)(""),i=Object(l.a)(r,2),j=i[0],o=i[1],b=Object(s.useState)(""),p=Object(l.a)(b,2),m=p[0],f=p[1],x=Object(s.useContext)(h),v=Object(l.a)(x,1)[0],g=function(){var e=Object(d.a)(u.a.mark((function e(a){var s,r,i,d,b,p,h,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),s={userId:v.id,picturesId:t,contenu:j},o(""),e.prev=3,e.next=6,O.a.post("/comments/",s);case 6:r=e.sent,f("Message envoye"),n&&(i=Object(l.a)(n,2),d=i[0],b=i[1],(p=Object(ie.a)(d)).unshift(r.data),b(p)),c&&(h=Object(l.a)(c,2),m=h[0],(0,h[1])(m+1)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),e.t0.response&&e.t0.response.data&&(e.t0.response.data.split(" ").includes("'user_id'")||"Unauthorized"===e.t0.response.data)&&f("Merci de vous identifier");case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"comments-box",children:Object(a.jsxs)("div",{className:"comments-input",children:[Object(a.jsx)("input",{className:"comments-put",type:"text",value:j,placeholder:m||"Ecrire un commentaire",onChange:function(e){f(""),o(e.target.value)}}),Object(a.jsx)("button",{onClick:g,className:"add-com",children:Object(a.jsx)(N.a,{size:18})})]})})},je=(c(127),function(){var e=Object(s.useState)(0),t=Object(l.a)(e,2),c=t[0],a=t[1];return Object(s.useLayoutEffect)((function(){var e=function(){a(document.body.clientWidth)};return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[]),c}),oe=function(){var e=Object(s.useState)([]),t=Object(l.a)(e,2),c=t[0],n=t[1],r=Object(s.useState)(""),i=Object(l.a)(r,2),j=i[0],o=i[1],u=Object(s.useState)({photo:0}),d=Object(l.a)(u,2),b=d[0],O=d[1],p=Object(s.useState)(0),h=Object(l.a)(p,2),m=h[0],f=h[1],x=Object(s.useContext)(Ee),v=Object(l.a)(x,2),g=v[0],N=v[1],w=H("get","pics/"+g.picId),k=H("get","users/"+w.data.user_id),S=H("get","comments/pic/"+g.picId),C=je(),E=Object(s.useRef)(),I=Object(s.useRef)(),_=Object(s.useRef)(),R=z(_.current);return Object(s.useEffect)((function(){(R||C<=500&&0!==C)&&(N(Object(y.a)(Object(y.a)({},g),{},{auth:!1})),Q(g.scrollPos))}),[R,g,N,C]),Object(s.useEffect)((function(){var e=b.photo-I.current.offsetHeight||0;f(e)}),[b.photo,I]),Object(s.useEffect)((function(){if(w.data&&w.data.creation){var e=B(w.data.creation);o(e)}}),[w.data]),Object(s.useEffect)((function(){n(S.data)}),[S.data]),Object(a.jsx)("div",{className:"solo-container",ref:_,onClick:function(){N(Object(y.a)(Object(y.a)({},g),{},{auth:!g.auth})),Q(g.scrollPos)},style:{top:window.scrollY+"px"},children:Object(a.jsxs)("div",{className:"solo-photo-photo",onClick:function(e){return e.stopPropagation()},children:[Object(a.jsx)("img",{src:w.data.path,alt:w.data.title,ref:E,onLoad:function(){O(Object(y.a)(Object(y.a)({},b),{},{photo:E.current.clientHeight}))}}),Object(a.jsx)("div",{className:"solo-info-wrapper",children:Object(a.jsx)("div",{className:"solo-info-card-container",children:Object(a.jsxs)("div",{className:"solo-info-card-main",children:[Object(a.jsxs)("div",{className:"solo-title",ref:I,children:[Object(a.jsx)("h2",{children:w.data.title}),Object(a.jsx)("h3",{children:"Poste le :"}),Object(a.jsx)("p",{children:j}),Object(a.jsx)("h3",{children:" Description : "}),Object(a.jsx)("p",{children:w.data.desc}),Object(a.jsxs)("div",{className:"solo-info-center",children:[Object(a.jsx)($,{path:k.data.profile,id:k.data.id,size:60}),Object(a.jsx)("h3",{children:k.data.username}),Object(a.jsx)(le,{picId:w.data.id,comState:[c,n]})]})]}),Object(a.jsx)("div",{className:"solo-comms",style:{height:m+"px"},children:c&&c.map((function(e){return Object(s.createElement)(re,Object(y.a)(Object(y.a)({},e),{},{delCom:[c,n],key:e.id}))}))})]})})})]})})},ue=(c(128),function(){var e=Object(s.useState)({username:"",login:"",password:"",passwordC:""}),t=Object(l.a)(e,2),c=t[0],n=t[1],r=Object(s.useState)({}),i=Object(l.a)(r,2),j=i[0],o=i[1],b=Object(s.useState)(!1),p=Object(l.a)(b,2),h=p[0],m=p[1],f=Object(s.useState)(!1),x=Object(l.a)(f,2),v=x[0],N=x[1],w=Object(s.useState)(""),k=Object(l.a)(w,2),S=k[0],E=k[1],z=Object(s.useState)(!1),_=Object(l.a)(z,2),R=_[0],M=_[1],D=function(e){o({}),n(Object(y.a)(Object(y.a)({},c),{},Object(g.a)({},e.target.id,e.target.value)))},T=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),t=(t=new Date).toISOString().slice(0,19).replace("T"," "),(a=new FormData).append("username",c.username),a.append("login",c.login),a.append("password",c.password),a.append("date_creation",t),a.append("image",S),e.prev=9,e.next=12,O.a.post("/users/prof/",a);case 12:M(!0),m(!1),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),o(Object(y.a)(Object(y.a)({},j),{},{sign:"Oops petit probleme"}));case 19:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"signup-all",children:Object(a.jsxs)("div",{className:"signup-wrapp",children:[Object(a.jsx)("h2",{children:"S'enregistrer"}),Object(a.jsxs)("form",{encType:"multipart/form-data",method:"post",onSubmit:function(e){e.preventDefault();var t={};for(var a in c)"username"===a&&(q.isMinSize(c[a],2)||(t=Object(y.a)(Object(y.a)({},t),{},Object(g.a)({},a,"Please enter minimum 2 characters")))),"login"===a&&(q.emailIsValid(c[a])||(t=Object(y.a)(Object(y.a)({},t),{},Object(g.a)({},a,"Merci d'entrer un e mail valide ")))),"password"===a&&(q.isMinSize(c[a],8)?q.isSame(c[a],c.passwordC)||(t=Object(y.a)(Object(y.a)({},t),{},Object(g.a)({},a,"Vos mots de passes sont differents"))):t=Object(y.a)(Object(y.a)({},t),{},Object(g.a)({},a,"Please enter minimum 8 characters")));S||(t=Object(y.a)(Object(y.a)({},t),{},{profile:"Please add a picture"})),0===Object.keys(t).length?T():o(t)},children:[Object(a.jsxs)("div",{className:"signup-inputs",children:[Object(a.jsx)("h3",{children:"Pr\xe9nom"}),Object(a.jsx)("input",{id:"username",type:"text",value:c.username,placeholder:"min 2 caract\xe9res",onChange:D})]}),Object(a.jsx)("p",{children:j.username}),Object(a.jsxs)("div",{className:"signup-inputs",children:[Object(a.jsx)("h3",{children:"E mail"}),Object(a.jsx)("input",{id:"login",type:"text",value:c.login,placeholder:"e mail valide",onChange:D})]}),Object(a.jsx)("p",{children:j.login}),Object(a.jsxs)("div",{className:"signup-inputs",children:[Object(a.jsx)("h3",{children:"Mot de passe"}),Object(a.jsx)("input",{id:"password",type:v?"text":"password",value:c.password,placeholder:"min 8 caract\xe9res",onChange:D}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),N(!v)},children:v?Object(a.jsx)(F.b,{size:18}):Object(a.jsx)(F.a,{size:18})})]}),Object(a.jsxs)("div",{className:"signup-inputs",children:[Object(a.jsx)("h3",{children:"Confirmer le mot de passe"}),Object(a.jsx)("input",{id:"passwordC",type:v?"text":"password",value:c.passwordC,placeholder:"min 8 caract\xe9res",onChange:D})]}),Object(a.jsx)("p",{children:j.password}),Object(a.jsx)("label",{htmlFor:"add-profile-pic",children:S&&"string"!==typeof S?"Photo ajout\xe9e":"S\xe9lectionner une photo"}),Object(a.jsx)("input",{id:"add-profile-pic",type:"file",accept:"image/jpeg , image/png",onChange:function(e){E(e.target.files[0])}}),Object(a.jsx)("p",{children:j.profile}),Object(a.jsx)("button",{type:"submit",children:Object(a.jsx)(C,{sizeAll:20,loadingValue:h,children:Object(a.jsx)(P.a,{size:18})})}),Object(a.jsx)("p",{children:j.sign}),R&&Object(a.jsx)(I.a,{to:"/"})]})]})})}),de=function(e){var t=e.id,c=e.name,n=e.userId,r=Object(s.useState)(""),i=Object(l.a)(r,2),o=i[0],b=i[1],p=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("/requetes/",{family_id:t,user_id:n});case 3:b("Vous avez envoyez une demande aux ".concat(c)),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),e.t0.response&&b(e.t0.response.data);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"family-card",children:[Object(a.jsx)(j.b,{to:"/family/".concat(t),children:Object(a.jsx)("div",{className:"family-name-circle",children:Object(a.jsx)("h2",{children:c})})}),Object(a.jsx)("input",{type:"button",value:"Rejoindre les ".concat(c),onClick:p}),Object(a.jsx)("p",{children:o})]})},be=(c(129),function(){var e=Object(s.useContext)(h),t=Object(l.a)(e,2),c=t[0],n=t[1],r=Object(s.useState)({name:"",searchbar:""}),i=Object(l.a)(r,2),j=i[0],o=i[1],b=Object(s.useState)(""),p=Object(l.a)(b,2),m=p[0],f=p[1],x=Object(s.useState)([]),v=Object(l.a)(x,2),N=v[0],w=v[1],k=Object(s.useState)(!1),S=Object(l.a)(k,2),C=S[0],E=S[1],z=Object(s.useState)({}),I=Object(l.a)(z,2),_=I[0],R=I[1],M=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!q.isMinSize(j.name,3)){e.next=16;break}return e.prev=2,e.next=5,O.a.post("/family/",{name:j.name,creator:_.id});case 5:a=e.sent,f("la Famille ".concat(a.data.name," existe \xe0 present ! ")),n(Object(y.a)(Object(y.a)({},c),{},{family_id:a.data.id})),E(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),f(e.t0.response.data);case 14:e.next=17;break;case 16:f("Pas assez de caracteres");case 17:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(u.a.mark((function e(t){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(Object(y.a)(Object(y.a)({},j),{},Object(g.a)({},t.target.name,t.target.value))),e.prev=1,e.next=4,O.a.get("/family/search/"+t.target.value);case 4:c=e.sent,w(c.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),w([]);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){R(Object(y.a)({},c))}),[c]),Object(a.jsxs)("div",{className:"family-all",children:[Object(a.jsx)("div",{className:"intro"}),Object(a.jsxs)("div",{className:"family-container-main",children:[null===_.family_id&&Object(a.jsxs)("div",{className:"family-bloc",children:[Object(a.jsx)("h2",{className:"create",children:"Creer votre famille"}),Object(a.jsxs)("div",{className:"family-create",children:[Object(a.jsx)("h3",{children:"Entrez le nom de votre famille"}),Object(a.jsx)("input",{type:"text",name:"name",placeholder:"Minimum 3 Caracteres",value:j.name,onChange:function(e){f(""),o(Object(y.a)(Object(y.a)({},j),{},Object(g.a)({},e.target.name,e.target.value)))}}),Object(a.jsx)("button",{onClick:M,children:"Creer"})]}),Object(a.jsx)("p",{children:m})]}),C&&Object(a.jsx)("div",{className:"creation-done",children:Object(a.jsx)(T.c,{size:"60"})}),Object(a.jsxs)("div",{className:"family-bloc",children:[Object(a.jsx)("h2",{className:"search",children:"Recherchez une famille et rejoignez la"}),Object(a.jsx)("div",{className:"family-search",children:Object(a.jsx)("input",{type:"text",name:"searchbar",value:j.searchbar,placeholder:"Entrez un nom de famille",onChange:P})})]}),Object(a.jsx)("div",{className:"family-search-result",children:N.map((function(e){return Object(s.createElement)(de,Object(y.a)(Object(y.a)({},e),{},{key:e.id,userId:c.id}))}))})]})]})}),Oe=c(50),pe=c(51),he=function(e){var t=e.reqId,c=e.famId,n=e.demP,r=e.currentUser,i=Object(l.a)(n,2),j=i[0],o=i[1],b=Object(s.useState)(""),p=Object(l.a)(b,2),h=p[0],m=p[1],f=Object(l.a)(r,2),x=f[0],v=f[1],g=H("get","users/"+t),N=function(){var e=Object(d.a)(u.a.mark((function e(a){var s,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),"Accepter"!==a.target.parentNode.id&&"Accepter"!==a.target.id){e.next=14;break}return e.prev=2,e.next=5,O.a.put("/users/"+t,{family_id:c});case 5:return e.next=7,O.a.delete("/requetes?user_id="+t);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0.response&&m(e.t0.response.data);case 12:e.next=22;break;case 14:return e.prev=14,e.next=17,O.a.delete("/requetes?user_id="+t);case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),e.t1.response&&m(e.t1.response.data);case 22:s=j.filter((function(e){return e!==t})),n=x.familyRequest.filter((function(e){return e!==t})),v(Object(y.a)(Object(y.a)({},x),{},{familyRequest:n})),o(s);case 26:case"end":return e.stop()}}),e,null,[[2,9],[14,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"family-profile-req-btn",children:[Object(a.jsx)($,{id:g.data.id,size:80}),Object(a.jsx)("p",{children:g.data.username}),Object(a.jsxs)("div",{className:"family-profile-btn",children:[Object(a.jsx)("button",{id:"Accepter",onClick:N,children:Object(a.jsx)(Oe.a,{id:"Accepter",size:24})}),Object(a.jsx)("button",{id:"Refuser",onClick:N,children:Object(a.jsx)(pe.a,{id:"Refuser",size:24})})]}),Object(a.jsx)("p",{children:h})]})},me=function(e){var t=e.match,c=Object(s.useState)([]),n=Object(l.a)(c,2),r=n[0],i=n[1],j=Object(s.useContext)(h),o=Object(l.a)(j,2),b=o[0],p=o[1],m=Object(s.useState)(!1),f=Object(l.a)(m,2),x=f[0],v=f[1],g=Object(s.useRef)(!0),N=H("get","family/"+t.params.id,r),w=H("get","family/ismember/?user="+b.id+"&family="+t.params.id),k=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O.a.put("/users/"+b.id,{family_id:null});case 4:p(Object(y.a)(Object(y.a)({},b),{},{family_id:null})),v(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){w.data&&function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/users/"+b.id);case 3:return t=e.sent,g.current&&i(t.data.familyRequest),e.abrupt("return",t.data.family_id);case 8:return e.prev=8,e.t0=e.catch(0),i([]),e.abrupt("return",0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[w.data,b.id]),Object(s.useEffect)((function(){return function(){g.current=!1}}),[]),Object(a.jsxs)("div",{className:"family-profile-all",children:[Object(a.jsx)("div",{className:"intro"}),Object(a.jsxs)("div",{className:"family-profile-container",children:[Object(a.jsxs)("div",{className:"family-profile-top-title",children:[Object(a.jsx)("h2",{children:N.data.name}),w.data&&Object(a.jsx)("button",{onClick:k,children:"Quitter ma famille"})]}),Object(a.jsx)("h3",{children:"Membres de la famille"}),Object(a.jsx)("div",{className:"family-profile-members",children:N.data.familyMembers&&Object(a.jsx)(K.a,{responsive:X,swipeable:!0,draggable:!0,showDots:!1,centerMode:!1,containerClass:"carousel-container",itemClass:"carousel-item",children:N.data.familyMembers.map((function(e){return Object(a.jsxs)("div",{className:"family-profile-solo",children:[Object(a.jsx)($,{id:e.id,size:50}),Object(a.jsx)("p",{children:e.username})]},e.id)}))})}),Object(a.jsxs)("div",{className:"family-profile-request",children:[w.data&&Object(a.jsx)("h3",{children:"Personnes voulant rejoindre votre famille"}),Object(a.jsx)("div",{className:"family-profile-request-card",children:r&&r.map((function(e){return Object(a.jsx)(he,{reqId:e,famId:N.data.id,demP:[r,i],currentUser:[b,p]},e)}))})]})]}),x&&Object(a.jsx)(I.a,{to:"/familysearch"})]})},fe=(c(130),c(131),function(e){var t=Object(s.useState)(!1),c=Object(l.a)(t,2),a=c[0],n=c[1],r=function(e){e.target&&e.target.complete&&n(!0)};return Object(s.useEffect)((function(){e.current&&e.current.addEventListener("load",r)}),[e]),a}),xe=function(e){var t=e.path,c=e.title,n=e.id,r=e.user_id,i=Object(s.useState)(0),j=Object(l.a)(i,2),o=j[0],u=j[1],d=Object(s.useContext)(Ee),b=Object(l.a)(d,2),O=b[0],p=b[1],h=Object(s.useState)(!1),m=Object(l.a)(h,2),f=m[0],x=m[1],v=H("get","users/"+r),g=H("get","comments/pic/"+n),N=Object(s.useRef)(),w=Object(s.useRef)(),k=Y(N),C=fe(w),E=je();return Object(s.useEffect)((function(){u(g.data.length)}),[g.data]),Object(a.jsxs)("div",{className:"display-pics-card",ref:N,style:{opacity:"".concat(k)},children:[Object(a.jsx)("div",{className:"display-pics-pop",children:Object(a.jsxs)("div",{className:"display-pics-pop-inside",children:[Object(a.jsx)($,{id:v.data.id,size:30}),Object(a.jsx)("h2",{children:v.data.username})]})}),Object(a.jsxs)("div",{className:"display-pics-image",children:[Object(a.jsx)("img",{src:t,alt:c,className:"display-pics-image",onClick:function(){E>500?(p(Object(y.a)(Object(y.a)({},O),{},{auth:!O.auth,picId:n,scrollPos:window.scrollY})),U()):x(!0)},ref:w}),Object(a.jsx)("div",{className:C?"waiting":"image-loader",children:Object(a.jsx)(S.a,{type:"ThreeDots",color:"#77aca2",height:50,width:50,timeout:0})})]}),Object(a.jsx)("div",{className:"display-pics-pop",children:Object(a.jsx)("div",{className:"display-pics-pop-wrapper",children:Object(a.jsxs)("div",{className:"display-pics-pop-info",children:[Object(a.jsx)("h3",{children:c}),Object(a.jsxs)("div",{className:"comments",children:[Object(a.jsxs)("div",{className:"comments-inside",children:[Object(a.jsx)(T.a,{size:20}),Object(a.jsxs)("h3",{children:[o," "]})]}),Object(a.jsx)(le,{picId:n,refresh:[o,u]})]})]})})}),f&&Object(a.jsx)(I.a,{to:"/pics/".concat(n)})]})},ve=c(52),ge=c.n(ve),ye=function(e){return ge()({container:e,trueOrder:!1,waitForImages:!1,margin:8,columns:6,breakAt:{1400:5,1200:4,940:3,700:2,500:1}})},Ne=function(e){var t=e.urlChoices,c=Object(s.useContext)(x),n=Object(l.a)(c,1)[0],r=H("get",t,n),i=Object(s.useRef)();return Object(s.useEffect)((function(){i.current&&null!==i.current&&r.data.length>0&&!r.loading&&ye(i.current).runOnImageLoad((function(){ye(i.current).recalculate(!0)}),!0)}),[r.data,r.loading,i]),Object(a.jsxs)("div",{className:"display-pics-main",children:[Object(a.jsx)("div",{className:"intro"}),Object(a.jsx)("div",{className:"display-pics-wrapper",ref:i,children:r&&r.data.map((function(e){return Object(s.createElement)(xe,Object(y.a)(Object(y.a)({},e),{},{key:e.id}))}))})]})},we="family/pics/",ke="pics?pictures.private=0",Se=function(){var e=Object(s.useContext)(h),t=Object(l.a)(e,1)[0],c=Object(s.useContext)(f),n=Object(l.a)(c,2),r=n[0],i=n[1],j=Object(s.useContext)(m),o=H("get","users/"+t.id),u=Object(s.useState)(ke),d=Object(l.a)(u,2),b=d[0],O=d[1];return Object(s.useEffect)((function(){i(!0),j?t.family_id&&O(we+o.data.family_id):O(ke)}),[j,t.family_id,o.data.family_id,r,i]),Object(a.jsx)(Ne,{urlChoices:b})},Ce=(c(132),function(e){var t=e.match,c=Object(s.useState)([]),n=Object(l.a)(c,2),r=n[0],i=n[1],j=Object(s.useState)(!1),o=Object(l.a)(j,2),u=o[0],d=o[1],b=H("get","comments/pic/"+t.params.id),O=H("get","pics/"+t.params.id),p=H("get","users/"+O.data.user_id),h=je();return Object(s.useEffect)((function(){h>500&&d(!0)}),[h]),Object(s.useEffect)((function(){i(b.data)}),[b.data]),Object(a.jsxs)("div",{className:"picphone-all",children:[Object(a.jsx)("img",{src:O.data.path,alt:O.data.title}),Object(a.jsxs)("div",{className:"picphone-info-all",children:[Object(a.jsxs)("div",{className:"picphone-info-container",children:[Object(a.jsxs)("div",{className:"picphone-info-profile",children:[Object(a.jsx)($,{path:p.data.profile,id:p.data.id,size:60}),Object(a.jsx)("h3",{children:p.data.username})]}),Object(a.jsxs)("div",{className:"picphone-info-picdata",children:[Object(a.jsx)("h2",{children:O.data.title}),Object(a.jsx)("h3",{children:"Poste le :"}),Object(a.jsx)("p",{}),Object(a.jsx)("h3",{children:" Description : "}),Object(a.jsx)("p",{children:O.data.desc})]})]}),Object(a.jsx)(le,{picId:O.data.id,comState:[r,i]}),Object(a.jsx)("div",{className:"picphone-comments",children:r&&r.map((function(e){return Object(s.createElement)(re,Object(y.a)(Object(y.a)({},e),{},{delCom:[r,i],key:e.id}))}))})]}),u&&Object(a.jsx)(I.a,{to:"/"})]})}),Ee=Object(s.createContext)([]),ze=function(){var e=Object(s.useState)({picId:0,auth:!1}),t=Object(l.a)(e,2),c=t[0],n=t[1];return Object(a.jsx)("div",{className:"routes-app",children:Object(a.jsx)(v,{children:Object(a.jsxs)(Ee.Provider,{value:[c,n],children:[Object(a.jsx)(V,{}),c.auth&&Object(a.jsx)(oe,{}),Object(a.jsx)("div",{className:"route-content",children:Object(a.jsxs)(I.d,{children:[Object(a.jsx)(I.b,{exact:!0,path:"/",component:Se}),Object(a.jsx)(I.b,{path:"/signup",component:ue}),Object(a.jsx)(I.b,{path:"/familysearch",component:be}),Object(a.jsx)(I.b,{path:"/family/:id",component:me}),Object(a.jsx)(I.b,{path:"/search",component:se}),Object(a.jsx)(te,{path:"/users/:id",component:Z}),Object(a.jsx)(te,{path:"/pics/:id",component:Ce}),Object(a.jsx)(I.a,{to:"/error"})]})})]})})})},Ie=function(){return Object(a.jsx)("h1",{children:"404"})};var _e=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(I.d,{children:[Object(a.jsx)(I.b,{exact:!0,path:"/error",component:Ie}),Object(a.jsx)(I.b,{component:ze})]})})},Re=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,136)).then((function(t){var c=t.getCLS,a=t.getFID,s=t.getFCP,n=t.getLCP,r=t.getTTFB;c(e),a(e),s(e),n(e),r(e)}))};i.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(j.a,{basename:"/myfamily",children:Object(a.jsx)(_e,{})})}),document.getElementById("root")),Re()},61:function(e,t,c){},62:function(e,t,c){},63:function(e,t,c){},82:function(e,t,c){},83:function(e,t,c){}},[[133,1,2]]]);
//# sourceMappingURL=main.f1a518c9.chunk.js.map